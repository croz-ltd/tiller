import { ArgsTable, Stories } from "@storybook/addon-docs";

import { Intl } from "@tiller-ds/intl";

# Intl

Intl represents a component which can communicate with external translation services or
local dictionary files. See prop docs for best info on how to use the component.

## Intl Provider

Key prerequisite for basic functioning of some components is `Intl Provider`.
If you use these components without wrapping them inside the provider your app will crash.
This is because these components use `react-intl` peer dependency in order to function and properly
display components which depend on your location.

**The list of components which require your app to be wrapped inside `Intl Provider`**:

- Amount
- Login
- Number

## Default Intl Dictionary

We ship Tiller with a default dictionary which contains necessary translations (localized so far) for the components:

```json
{
  messages: {
    required: "Required field",
    "autocomplete.noTags": "No tags selected",
    "autocomplete.addTag": "Add tag:",
    "autocomplete.noResults": "No results for:",
    "select.noResults": "No results",
    "pagination.summary": "Showing {from} to {to} of {total} results",
    "pageResizer.summary": "Show {pageSizeSelect} results per page",
  },
  translations: {
    hr: {
      required: "Obavezno polje",
      "autocomplete.noTags": "Nema odabranih oznaka",
      "autocomplete.addTag": "Dodaj oznaku:",
      "autocomplete.noResults": "Nema rezultata za:",
      "select.noResults": "Nema rezultata",
      "pagination.summary": "Prikazuje se {from} do {to} od {total} rezultata",
      "pageResizer.summary": "Prikaži {pageSizeSelect} rezultata po stranici",
    },
    en: {
      required: "Required field",
      "autocomplete.noTags": "No tags selected",
      "autocomplete.addTag": "Add tag:",
      "autocomplete.noResults": "No results for:",
      "select.noResults": "No results",
      "pagination.summary": "Showing {from} to {to} of {total} results",
      "pageResizer.summary": "Show {pageSizeSelect} results per page",
    },
  },
};
```

## Default Patterns Dictionary

We also ship Tiller with a default patterns dictionary which contains necessary translations (localized so far) for our patterns:

```json
{
  "messages": {},
  "translations": {
    "hr": {
      "login.labels.header": "Prijavi se",
      "login.labels.email": "E-pošta",
      "login.labels.username": "Korisničko ime",
      "login.labels.password": "Lozinka",
      "login.labels.rememberMe": "Zapamti me",
      "login.labels.login": "Prijava",
      "login.labels.forgotPassword": "Zaboravili ste lozinku?",
      "login.labels.forgottenPassword": "Zaboravljena lozinka?",
      "login.labels.forgottenPasswordDescription": "Unesite adresu e-pošte povezanu s vašim računom i poslat ćemo vam poveznicu za resetiranje lozinke.",
      "login.labels.sendEmail": "Pošalji e-poštu",
      "login.labels.backToLogin": "Povratak na prijavu",
      "login.labels.checkEmailNotification": "Molimo provjerite svoju e-poštu i kliknite na ponuđenu poveznicu za resetiranje lozinke.",
      "login.labels.resetPasswordTitle": "Resetiraj lozinku",
      "login.labels.resetPassword": "Resetiraj lozinku",
      "login.labels.resetPasswordDescription": "Vaša nova lozinka mora se razlikovati od prethodno korištenih lozinki. Lozinka mora sadržavati najmanje 8 znakova, jedno veliko slovo, jedan broj i jedan poseban znak.",
      "login.labels.newPassword": "Nova lozinka",
      "login.labels.newPasswordRepeat": "Ponovite lozinku",
      "login.labels.passwordChangeNotification": "Vaša lozinka je uspješno promijenjena.",
      "login.validation.passwordValidation.newPassword.required": "Polje unosa nove lozinke je obavezno.",
      "login.validation.passwordValidation.newPassword.regex": "Lozinka mora sadržavati najmanje 8 znakova, jedno veliko slovo, jedan broj i jedan poseban znak.",
      "login.validation.passwordValidation.repeatPassword.required": "Polje ponavljanja zaporke je obavezno.",
      "login.validation.passwordValidation.repeatPassword.oneOf": "Lozinke moraju biti jednake.",
      "login.validation.emailValidation.email.validity": "E-pošta mora biti valjana.",
      "login.validation.emailValidation.email.required": "E-pošta je obavezno polje.",
      "login.validation.loginValidation.username.required": "Korisničko ime je obavezno polje.",
      "login.validation.loginValidation.password.required": "Lozinka je obavezno polje.",
      "login.validation.loginEmailValidation.email.required": "E-pošta je obavezno polje.",
      "login.validation.loginEmailValidation.password.required": "Lozinka je obavezno polje."
    },
    "en": {
      "login.labels.header": "Login Here",
      "login.labels.email": "Email",
      "login.labels.username": "Username",
      "login.labels.password": "Password",
      "login.labels.rememberMe": "Remember Me",
      "login.labels.login": "Log In",
      "login.labels.forgotPassword": "Forgot Password?",
      "login.labels.forgottenPassword": "Forgotten Password?",
      "login.labels.forgottenPasswordDescription": "Enter the email address associated with your account and we will send you a link to reset your password.",
      "login.labels.sendEmail": "Send Email",
      "login.labels.backToLogin": "Back to Login",
      "login.labels.checkEmailNotification": "Please check your email and click on the provided link to reset your password.",
      "login.labels.resetPasswordTitle": "Reset Password",
      "login.labels.resetPassword": "Reset Password",
      "login.labels.resetPasswordDescription": "Your new password must be different from previous used passwords. Password must contain at least 8 characters, one uppercase, one number and one special character.",
      "login.labels.newPassword": "New Password",
      "login.labels.newPasswordRepeat": "Repeat Password",
      "login.labels.passwordChangeNotification": "Your password has been successfully changed.",
      "login.validation.passwordValidation.newPassword.required": "New Password field is required.",
      "login.validation.passwordValidation.newPassword.regex": "Password must contain at least 8 characters, one upppercase, one number and one special character.",
      "login.validation.passwordValidation.repeatPassword.required": "Repeat Password field is required.",
      "login.validation.passwordValidation.repeatPassword.oneOf": "Passwords must match.",
      "login.validation.emailValidation.email.validity": "Email must be valid.",
      "login.validation.emailValidation.email.required": "Email field is required.",
      "login.validation.loginValidation.username.required": "Username field is required.",
      "login.validation.loginValidation.password.required": "Password field is required.",
      "login.validation.loginEmailValidation.email.required": "Email field is required.",
      "login.validation.loginEmailValidation.password.required": "Password field is required."
    }
  }
}
```

### Example of the easiest usage (inside index.tsx):

```ts
root.render(
  <React.StrictMode>
    <IntlProvider lang={"en"} loadDictionary={undefined}>
      <ThemeProvider themeConfig={tillerConfig}>
        <App />
      </ThemeProvider>
    </IntlProvider>
  </React.StrictMode>,
);
```

### keyConfig prop for IntlProvider:

You can replace default labels from two components using your custom dictionary. This is a new feature which will expand
over time.

By providing the keyConfig with a valid configuration of type **CommonKeys** you can override default values for:

- previousText and nextText of Pagination component (if you pass others via Pagination props those will override the dictionary values)
- required label shown when hovering over a required marker for a field (\*)

CommonKeys type is defined as below:

```ts
CommonKeys = {
  required?: string;
  autocompleteNoTags?: string;
  autocompleteAddTag?: string;
  autocompleteAddItem?: string;
  autocompleteNoResults?: string;
  selectNoResults?: string;
  paginationSummary?: string;
};
```

Example of usage which overrides the required label is shown below:

```ts
<IntlProvider
  lang={"en"}
  loadDictionary={undefined}
  dictionary={someDictionary}
  keyConfig={{ required: "requiredTooltip" }}
>
  <ThemeProvider themeConfig={tillerConfig}>
    <App />
  </ThemeProvider>
</IntlProvider>
```

**Note:** the key-value pairs inside your dictionary are expected to be **flattened**.

e.g. of **supported** format:

```json

      "login.labels.header": "Login Here",
```

<Stories includePrimary={true} />

## Intl Props:

<ArgsTable of={Intl} />
